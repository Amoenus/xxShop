function modFoat(e){var t=parseInt(e)+1;return 1>t-e?t:e}function getIEVersion(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent,n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=n.exec(t)&&(e=parseFloat(RegExp.$1))}return e}function loclkey(e){var t;return window.event?t=e.keyCode:e.which&&(t=e.which),17==t?!1:(!window.event.altKey||37!=window.event.keyCode&&39!=window.event.keyCode||(event.returnValue=!1),event.ctrlKey&&82==event.keyCode&&(event.keyCode=0,event.returnValue=!1),122==event.keyCode&&(event.keyCode=0,event.returnValue=!1),event.ctrlKey&&78==event.keyCode&&(event.returnValue=!1),event.shiftKey&&121==event.keyCode&&(event.returnValue=!1),"A"==window.event.srcElement.tagName&&window.event.shiftKey&&(window.event.returnValue=!1),window.event.altKey&&115==window.event.keyCode?(window.showModelessDialog("about:blank","","dialogWidth:1px;dialogheight:1px"),!1):void 0)}function CheckDate(INDate){if(""==INDate)return!0;if(subYY=INDate.substr(0,4),isNaN(subYY)||0>=subYY)return!0;if(-1!=INDate.indexOf("-",0))separate="-";else{if(-1==INDate.indexOf("/",0))return!0;separate="/"}if(area=INDate.indexOf(separate,0),subMM=INDate.substr(area+1,INDate.indexOf(separate,area+1)-(area+1)),isNaN(subMM)||0>=subMM)return!0;if(subMM.length<2&&(subMM="0"+subMM),area=INDate.lastIndexOf(separate),subDD=INDate.substr(area+1,INDate.length-area-1),isNaN(subDD)||0>=subDD)return!0;if(eval(subDD)<10&&(subDD="0"+eval(subDD)),NewDate=subYY+"-"+subMM+"-"+subDD,10!=NewDate.length)return!0;if("-"!=NewDate.substr(4,1))return!0;if("-"!=NewDate.substr(7,1))return!0;var MM=NewDate.substr(5,2),DD=NewDate.substr(8,2);if(subYY%4==0&&subYY%100!=0||subYY%400==0){if(2==parseInt(MM)&&DD>29)return!0}else if(2==parseInt(MM)&&DD>28)return!0;var mm=new Array(1,3,5,7,8,10,12),flag=!1;for(i=0;i<mm.length;i++)parseInt(MM,10)==mm[i]&&(flag=!0);if(1==flag){if(parseInt(DD)>31)return!0}else if(parseInt(DD)>30)return!0;return parseInt(MM)>12?!0:!1}function guidGenerator(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}$.ajaxSetup({cache:!1}),String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,n){return"undefined"!=typeof e[n]?e[n]:t})},String.prototype.sub=function(e,t){var n=this.slice(0,e),i=n.replace(/[^x00-xff]/g,"**").length;if(e>=i)return n;var r=t?"…":"";switch(i-=n.length){case 0:return n;case e:return this.slice(0,e>>1)+r;default:var o=e-i,a=this.slice(o,e),s=a.replace(/[x00-xff]/g,"").length;return(s?this.slice(0,o)+a.sub(s):this.slice(0,o))+r}},"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(e){return this.slice(0,e.length)==e}),"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(e){return this.slice(-e.length)==e}),function(e){e.getUrlParam=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?decodeURIComponent(n[2]):null},function(t,n,i,r){e.setUrlParam=function(e,o,a){a||(a=window.location.href),o=o!=r?encodeURIComponent(o).replace(n,"+"):o;var s=new RegExp("([?&]"+e.replace(t,"\\$1")+"=)[^&]*");return s.test(a)?a.replace(s,function(e,t){return o!=r?t+o:""}).replace(i,"$1?"):o!=r?a+(a.indexOf("?")+1?"&":"?")+e+"="+o:a}}(/([\\\/\[\]{}().*+?|^$])/g,/%20/g,/^([^?]+)&/),e.PageName4NoEx=function(){var e=location.href,t=e.split("/"),n=t.slice(t.length-1,t.length).toString(String).split(".");return n.slice(0,1)},e.PageName=function(){var e=location.href,t=e.split("/"),n=t[t.length-1];return n},e.getUrlPart=function(e){var t="/"+location.href.split("?").slice(0,1).toString().split("/").slice(3,e+3).join("/");return t},e.getUrlMiddle=function(){for(var e=location.href,t=e.split("/"),n="",i=t.length-1;i>2;i--)n="/"+t[i]+n;return n.split("?").slice(0,1).toString(String)},e.fn.sorted=function(t){var n={reversed:!1,by:function(e){return e.text()}};e.extend(n,t);var i=e(this),r=i.get();return r.sort(function(t,i){var r=n.by(e(t)),o=n.by(e(i));return n.reversed?o>r?1:r>o?-1:0:o>r?-1:r>o?1:0}),e(r)}}(jQuery),Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e},Date.prototype.toString=function(e,t){var n={};n.Year=this.getFullYear(),n.TYear=(""+n.Year).substr(2),n.Month=this.getMonth()+1,n.TMonth=n.Month<10?"0"+n.Month:n.Month,n.Day=this.getDate(),n.TDay=n.Day<10?"0"+n.Day:n.Day,n.Hour=this.getHours(),n.THour=n.Hour<10?"0"+n.Hour:n.Hour,n.hour=n.Hour<13?n.Hour:n.Hour-12,n.Thour=n.hour<10?"0"+n.hour:n.hour,n.Minute=this.getMinutes(),n.TMinute=n.Minute<10?"0"+n.Minute:n.Minute,n.Second=this.getSeconds(),n.TSecond=n.Second<10?"0"+n.Second:n.Second,n.Millisecond=this.getMilliseconds(),n.Week=this.getDay();var i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],o=["Sun","Mon","Tue","Web","Thu","Fri","Sat"],a=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],s=n.Millisecond/1e3;return void 0!=e&&e.replace(/\s/g,"").length>0?(void 0!=t&&"en"==t&&(r=i.slice(0),a=o.slice(0)),e=e.replace(/yyyy/gi,n.Year).replace(/yyy/gi,n.Year).replace(/yy/gi,n.TYear).replace(/y/gi,n.TYear).replace(/MMM/g,r[n.Month-1]).replace(/MM/g,n.TMonth).replace(/M/g,n.Month).replace(/dd/gi,n.TDay).replace(/d/gi,n.Day).replace(/HH/g,n.THour).replace(/H/g,n.Hour).replace(/hh/g,n.Thour).replace(/h/g,n.hour).replace(/mm/g,n.TMinute).replace(/m/g,n.Minute).replace(/ss/gi,n.TSecond).replace(/s/gi,n.Second).replace(/fff/gi,n.Millisecond).replace(/ff/gi,100*s.toFixed(2)).replace(/f/gi,10*s.toFixed(1)).replace(/EEE/g,a[n.Week])):e=n.Year+"-"+n.Month+"-"+n.Day+" "+n.Hour+":"+n.Minute+":"+n.Second,e},String.prototype.toShortDateString=function(){var e;return e=isNaN(this)?this.replace(/\D/gim,""):this,new Date(parseInt(e)).toString("yyyy-MM-dd")},String.prototype.toDate=function(){var e;return e=isNaN(this)?this.replace(/\D/gim,""):this,new Date(parseInt(e))},$.mergeJsonObject=function(e,t){var n={};for(var i in e)n[i]=e[i];for(var i in t)n[i]=t[i];return n},Array.prototype.distinct=function(){for(var e,t=[],n={},i=0,r=this.length;r>i;i++)e=this[i],n[e]!==e&&(t.push(e),n[e]=e);return t},Array.prototype.remove=function(e){if(isNaN(e)||e>this.length)return!1;for(var t=0,n=0;t<this.length;t++)this[t]!=this[e]&&(this[n++]=this[t]);this.length-=1},Array.prototype.getIndexByValue=function(e){for(var t=-1,n=0;n<this.length;n++)if(this[n]==e){t=n;break}return t},$.fn.smartFloat=function(){var e=function(e){var t=e.position().top,n=e.css("position");$(window).scroll(function(){var i=$(this).scrollTop();e.css(i>t?window.XMLHttpRequest?{position:"fixed",top:0}:{top:i}:{position:n,top:t})})};return $(this).each(function(){e($(this))})},$.fn.smartFloatIE6=function(){var e=function(e){{var t=e.position().top;e.css("position")}$(window).scroll(function(){var n=$(this).scrollTop();e.css(n>t?window.XMLHttpRequest?{position:"fixed",top:0}:{top:n}:{position:"absolute",top:t})})};return $(this).each(function(){e($(this))})},function(e){e.subStr=function(e,t){var n=e.match(/[^\x00-\xff]|\w{1,2}/g);return n.length<=t?e:n.slice(0,t).join("")+"…"},e.navURL=function(e){if(getIEVersion()>0){var t;t=parent.length?parent.window.document:window.document;var n=t.createElement("a");n.href=e,t.getElementsByTagName("body")[0].appendChild(n),n.click()}else parent.length?parent.window.location=e:window.location=e},e.navURLNewWindow4A=function(e){var t=document.createElement("a");t.target="_blank",t.href=e,document.body.appendChild(t),t.click()},e.navURLNewWindow4Form=function(e){var t=guidGenerator(),n=document.createElement("form");n.id=t,n.action=e,n.method="get",n.target="_blank",document.body.appendChild(n),n.submit()},e.LockBodyScroll=function(){e("boby").attr("scroll","no")},e.UnlockBodyScroll=function(){e("boby").attr("scroll","auto")},e.LockKey=function(){return e(document).bind("contextmenu",function(){return!1}),e(document).bind("selectstart",function(){return!1}),e(document).keydown(function(){return loclkey(arguments[0])}),"OK"}}(jQuery),$.fn.DisableCtrlV=function(){$(this).keydown(function(e){return $.browser.msie?event.keyCode>47&&event.keyCode<58||8==event.keyCode?!0:!1:e.which>47&&e.which<58||8==e.which||17==event.keyCode?!0:!1}).focus(function(){this.style.imeMode="disabled"})},$.fn.OnlyNum=function(){$.isFunction($.fn.on)?$(this).on("keydown",function(e){if(e.ctrlKey)return!0;var t=t||window.event,n=t.charCode||t.keyCode;8!=n&&9!=n&&46!=n&&(37>n||n>40)&&(48>n||n>57)&&(96>n||n>105)&&(t.preventDefault?t.preventDefault():t.returnValue=!1,$(this).show("highlight",150))}).on("focus",function(){this.style.imeMode="disabled"}).on("blur",function(){$(this).val($(this).val().replace(/[^\d]/g,""))}):$(this).live("keydown",function(e){if(e.ctrlKey)return!0;var t=t||window.event,n=t.charCode||t.keyCode;8!=n&&9!=n&&46!=n&&(37>n||n>40)&&(48>n||n>57)&&(96>n||n>105)&&(t.preventDefault?t.preventDefault():t.returnValue=!1,$(this).show("highlight",150))}).live("focus",function(){this.style.imeMode="disabled"}).live("blur",function(){$(this).val($(this).val().replace(/[^\d]/g,""))}),getIEVersion()>0&&$(this).bind("beforepaste",function(){clipboardData.setData("text",clipboardData.getData("text").replace(/[^\d]/g,""))})},$.fn.OnlyFloat=function(){$.isFunction($.fn.on)?$(this).on("keydown",function(e){function t(e,t){t.preventDefault?t.preventDefault():t.returnValue=!1,$(e).show("highlight",150)}if(e.ctrlKey)return!0;var n=n||window.event,i=n.charCode||n.keyCode;110==i||190==i?($(this).val().indexOf(".")>=0||!$(this).val().length)&&t(this,n):8!=i&&9!=i&&46!=i&&(37>i||i>40)&&(48>i||i>57)&&(96>i||i>105)&&t(this,n)}).on("focus",function(){this.style.imeMode="disabled"}).on("blur",function(){$(this).val($(this).val().replace(/[^\d.]/g,"").replace(/^\./g,""))}):$(this).live("keydown",function(e){function t(e,t){t.preventDefault?t.preventDefault():t.returnValue=!1,$(e).show("highlight",150)}if(e.ctrlKey)return!0;var n=n||window.event,i=n.charCode||n.keyCode;110==i||190==i?($(this).val().indexOf(".")>=0||!$(this).val().length)&&t(this,n):8!=i&&9!=i&&46!=i&&(37>i||i>40)&&(48>i||i>57)&&(96>i||i>105)&&t(this,n)}).live("focus",function(){this.style.imeMode="disabled"}).live("blur",function(){$(this).val($(this).val().replace(/[^\d.]/g,"").replace(/^\./g,""))}),getIEVersion()>0&&$(this).bind("beforepaste",function(){clipboardData.setData("text",clipboardData.getData("text").replace(/(^[0-9]([.][0-9]{1,2})?$)|(^1[0-9]([.][0-9]{1,2})?$)|(^2[0-3]([.][0-9]{1,2})?$)|(^24([.]0{1,2})?$)/g,""))})},jQuery.Hashtable=function(){this.items=new Array,this.itemsCount=0,this.add=function(e,t){this.containsKey(e)?this.items[e]=t:(this.items[e]=t,this.itemsCount++)},this.get=function(e){return this.containsKey(e)?this.items[e]:null},this.remove=function(e){if(!this.containsKey(e))throw"key '"+e+"' does not exists.";delete this.items[e],this.itemsCount--},this.containsKey=function(e){return"undefined"!=typeof this.items[e]},this.containsValue=function(e){for(var t in this.items)if(this.items[t]==e)return!0;return!1},this.contains=function(e){return this.containsKey(e)||this.containsValue(e)},this.clear=function(){this.items=new Array,itemsCount=0},this.size=function(){return this.itemsCount},this.length=function(){return this.itemsCount},this.isEmpty=function(){return 0==this.size()}};